<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.8"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.8
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.8.xsd">
    
    <changeSet author="vishal" id="1">
    	<preConditions onFail="MARK_RAN">
    		<not>
    			<tableExists tableName="users"/>
    		</not>
    	</preConditions>
    	<createTable tableName="users">
    		<column name="id" type="int(11)"/>
    		<column name="role" type="varchar(15)" />
    		<column name="contact_number" type="varchar(10)" />
    		<column name="name" type="varchar(45)" />
    		<column name="email" type="varchar(25)" />
    		<column name="password" type="varchar(15)" />
    		<column name="gender" type="varchar(6)" />
    		<column name="age" type="int(11)" />
    		<column name="address_1" type="varchar(200)" />
    		<column name="city" type="varchar(25)" />
    		<column name="state" type="varchar(25)" />
    		<column name="zip" type="int(6)" />
    	</createTable>
		<addPrimaryKey columnNames="id" tableName="users"/>
		<addNotNullConstraint columnName="contact_number" columnDataType="varchar(10)" tableName="users"/>
		<addNotNullConstraint columnName="name" columnDataType="varchar(45)" tableName="users"/>
		<addNotNullConstraint columnName="password" columnDataType="varchar(15)" tableName="users"/>
		<addNotNullConstraint columnName="gender" columnDataType="varchar(6)" tableName="users"/>
		<addNotNullConstraint columnName="age" columnDataType="int(11)" tableName="users"/>
		<addNotNullConstraint columnName="address_1" columnDataType="varchar(200)" tableName="users"/>
		<addNotNullConstraint columnName="city" columnDataType="varchar(25)" tableName="users"/>
		<addNotNullConstraint columnName="state" columnDataType="varchar(25)" tableName="users"/>
		<addNotNullConstraint columnName="zip" columnDataType="int(6)" tableName="users"/>
		<addUniqueConstraint columnNames="contact_number" tableName="users"/>     
    	<addUniqueConstraint columnNames="email" tableName="users"/>
    	<addAutoIncrement columnName="id" tableName="users" columnDataType="int(11)"/>    
    </changeSet>
    
    <changeSet author="vishal" id="2">
    	<preConditions onFail="MARK_RAN">
    		<not>
    			<tableExists tableName="ideas"/>
    		</not>    	
    	</preConditions>
    	<createTable tableName="ideas">
    		<column name="id" type="int(11)" />
    		<column name="user_id" type="int(11)" />
    		<column name="status" type="varchar(10)" />
    		<column name="title" type="varchar(50)" />
    		<column name="creationDate" type="datetime" />
    		<column name="description" type="varchar(1000)" />    	
    	</createTable>
    	<addPrimaryKey columnNames="id" tableName="ideas"/>
    	<addNotNullConstraint columnName="user_id" columnDataType="int(11)" tableName="ideas"/>
    	<addNotNullConstraint columnName="status" columnDataType="varchar(10)" tableName="ideas"/>
    	<addNotNullConstraint columnName="creationDate" columnDataType="datetime" tableName="ideas"/>
    	<addNotNullConstraint columnName="description" columnDataType="varchar(1000)" tableName="ideas"/>
    	<addAutoIncrement columnName="id" tableName="users" columnDataType="int(11)"/>    	    
    </changeSet>
    
    <changeSet author="vishal" id="3">
    	<preConditions onFail="MARK_RAN">
    		<not>
    			<tableExists tableName="invested"/>
    		</not>
    	</preConditions>
    	<createTable tableName="invested">
    		<column name="id" type="int(11)" />
    		<column name="user_id" type="int(11)" />
    		<column name="idea_id" type="int(11)" />    	
    	</createTable>
    	<addPrimaryKey columnNames="id" tableName="invested"/>
    	<addAutoIncrement columnName="id" tableName="invested" columnDataType="int(11)"/>    
    </changeSet>
    
    <changeSet author="vishal" id="4">
    	<preConditions onFail="MARK_RAN">
    		<not>
    			<tableExists tableName="interested"/>
    		</not>
    	</preConditions>
    	<createTable tableName="interested">
    		<column name="id" type="int(11)" />
    		<column name="user_id" type="int(11)" />
    		<column name="idea_id" type="int(11)" />    	
    	</createTable>
    	<addPrimaryKey columnNames="id" tableName="interested"/>
    	<addAutoIncrement columnName="id" tableName="interested" columnDataType="int(11)"/>    
    </changeSet>
    
    <changeSet author="vishal" id="5">
    	<preConditions onFail="MARK_RAN">
    		<not>
    			<tableExists tableName="idea_tags"/>
    		</not>
    	</preConditions>
    	<createTable tableName="idea_tags">
    		<column name="id" type="int(11)" />
    		<column name="idea_id" type="int(11)" />
    		<column name="tag_id" type="int(11)" />   	
    	</createTable>
    	<addPrimaryKey columnNames="id" tableName="idea_tags"/>
    	<addAutoIncrement columnName="id" tableName="idea_tags" columnDataType="int(11)"/>    
    </changeSet>
    
    <changeSet author="vishal" id="6">
    	<preConditions onFail="MARK_RAN">
    		<not>
    			<tableExists tableName="tags"/>
    		</not>
    	</preConditions>
    	<createTable tableName="tags">
    		<column name="id" type="int(11)" />
    		<column name="tag_name" type="varchar(25)" />  	
    	</createTable>
    	<addPrimaryKey columnNames="id" tableName="tags"/>
    	<addUniqueConstraint columnNames="tag_name" tableName="tags"/>
    	<addAutoIncrement columnName="id" tableName="tags" columnDataType="int(11)"/>    
    </changeSet>
    
</databaseChangeLog>